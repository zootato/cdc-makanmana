"use strict";(self.webpackChunkcdc_makanmana=self.webpackChunkcdc_makanmana||[]).push([[248],{248:(t,e,a)=>{a.d(e,{HalalService:()=>s});class s{static async initialize(){if(!this.initialized)try{const t=await fetch("https://raw.githubusercontent.com/zootato/singapore-halal-establishments/main/halal_establishments.json");if(!t.ok)throw new Error("GitHub API returned ".concat(t.status));this.halalEstablishments=await t.json(),this.initialized=!0,console.log("Loaded ".concat(this.halalEstablishments.length," halal establishments from GitHub"))}catch(t){console.error("Failed to load halal establishments from GitHub:",t),this.halalEstablishments=[],this.initialized=!0}}static async isHalal(t){await this.initialize();const e=this.findBestNameMatch(t.name,t.postalCode);return e?{isHalal:!0,source:e.source,certNumber:e.establishment.number}:{isHalal:!1,source:"NOT_IN_OFFICIAL_RECORDS"}}static findBestNameMatch(t,e){const a=this.cleanName(t),s=this.halalEstablishments.find(t=>this.cleanName(t.name)===a);if(s)return s.postal===e?{establishment:s,source:"MUIS_VERIFIED_EXACT_POSTAL"}:{establishment:s,source:"MUIS_VERIFIED_EXACT_NAME"};const n=a.split(" ").filter(t=>t.length>2);let l=null;for(const i of this.halalEstablishments){const a=this.cleanName(i.name).split(" ").filter(t=>t.length>2),s=n.filter(t=>a.some(e=>e.includes(t)||t.includes(e)||this.isWordSimilar(t,e))),c=s.length/Math.max(n.length,a.length),o=i.postal===e;c>=.9&&s.length>=2&&n.length>=2&&(console.log('\ud83d\udd4c POTENTIAL HALAL MATCH:\n          CDC: "'.concat(t,'" (postal: ').concat(e,')\n          MUIS: "').concat(i.name,'" (postal: ').concat(i.postal,")\n          Similarity: ").concat((100*c).toFixed(1),"%\n          Matching words: [").concat(s.join(", "),"]\n          Postal match: ").concat(o?"\u2705":"\u274c")),(!l||o&&!l.hasPostal||o===l.hasPostal&&c>l.similarity)&&(l={establishment:i,similarity:c,hasPostal:o}))}if(l){const e=l.hasPostal?{establishment:l.establishment,source:"MUIS_VERIFIED_SIMILAR_POSTAL"}:{establishment:l.establishment,source:"MUIS_VERIFIED_SIMILAR_NAME"};return console.log('\u2705 HALAL CONFIRMED: "'.concat(t,'" \u2192 "').concat(l.establishment.name,'" (Cert: ').concat(l.establishment.number,")")),e}return console.log('\u274c NOT HALAL: "'.concat(t,'" - no match found in MUIS database')),null}static isWordSimilar(t,e){const a={restaurant:["rest","resto"],kitchen:["kitchn","kitch"],food:["fd"],house:["hse"],corner:["cnr"],centre:["center","ctr"],international:["intl"],company:["co"],private:["pte","pvt"],limited:["ltd"]};for(const[i,c]of Object.entries(a))if(t===i&&c.includes(e)||e===i&&c.includes(t)||c.includes(t)&&c.includes(e))return!0;const s=t.length>e.length?t:e,n=t.length>e.length?e:t;if(0===s.length)return!1;const l=this.levenshteinDistance(s,n);return(s.length-l)/s.length>=.8}static levenshteinDistance(t,e){const a=Array(e.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let s=0;s<=t.length;s++)a[0][s]=s;for(let s=0;s<=e.length;s++)a[s][0]=s;for(let s=1;s<=e.length;s++)for(let n=1;n<=t.length;n++){const l=t[n-1]===e[s-1]?0:1;a[s][n]=Math.min(a[s][n-1]+1,a[s-1][n]+1,a[s-1][n-1]+l)}return a[e.length][t.length]}static cleanName(t){return t.toLowerCase().replace(/\b(pte|ltd|private|limited|sdn|bhd)\b/g,"").replace(/\b(stall|#|unit|\d+[a-z]?)\s*\d+/g,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}}s.halalEstablishments=[],s.initialized=!1}}]);
//# sourceMappingURL=248.e4a4010b.chunk.js.map