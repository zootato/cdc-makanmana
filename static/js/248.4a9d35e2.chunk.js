"use strict";(self.webpackChunkcdc_makanmana=self.webpackChunkcdc_makanmana||[]).push([[248],{248:(a,t,e)=>{e.d(t,{HalalService:()=>s});class s{static async initialize(){if(!this.initialized)try{const a=await fetch("https://raw.githubusercontent.com/zootato/singapore-halal-establishments/main/halal_establishments.json");if(!a.ok)throw new Error("GitHub API returned ".concat(a.status));this.halalEstablishments=await a.json(),this.initialized=!0,console.log("Loaded ".concat(this.halalEstablishments.length," halal establishments from GitHub"))}catch(a){console.error("Failed to load halal establishments from GitHub:",a),this.halalEstablishments=[],this.initialized=!0}}static async isHalal(a){await this.initialize();const t=this.halalEstablishments.find(t=>t.postal===a.postalCode);if(t)return this.namesAreSimilar(a.name,t.name)?{isHalal:!0,source:"MUIS_VERIFIED_POSTAL_NAME",certNumber:t.number}:{isHalal:!0,source:"MUIS_VERIFIED_POSTAL",certNumber:t.number};const e=this.findBestNameMatch(a.name);return e?{isHalal:!0,source:"MUIS_VERIFIED_NAME",certNumber:e.number}:this.detectHalalKeywords(a.name)?{isHalal:!0,source:"KEYWORD_DETECTED"}:{isHalal:!1,source:"NOT_DETECTED"}}static findBestNameMatch(a){const t=this.cleanName(a);let e=this.halalEstablishments.find(a=>this.cleanName(a.name)===t);if(e)return e;const s=t.split(" ").filter(a=>a.length>2);for(const i of this.halalEstablishments){const a=this.cleanName(i.name).split(" ").filter(a=>a.length>2);if(s.filter(t=>a.some(a=>a.includes(t)||t.includes(a))).length>=Math.min(2,.6*s.length))return i}return null}static cleanName(a){return a.toLowerCase().replace(/\b(pte|ltd|private|limited|sdn|bhd)\b/g,"").replace(/\b(stall|#|unit|\d+[a-z]?)\s*\d+/g,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}static namesAreSimilar(a,t){const e=this.cleanName(a),s=this.cleanName(t);if(e===s)return!0;if(e.includes(s)||s.includes(e))return!0;const i=e.split(" ").filter(a=>a.length>2),l=s.split(" ").filter(a=>a.length>2);if(0===i.length||0===l.length)return!1;return i.filter(a=>l.some(t=>t.includes(a)||a.includes(t))).length>=.5*Math.min(i.length,l.length)}static detectHalalKeywords(a){const t=a.toLowerCase();return["halal","muslim","islamic","bismillah","salam","warung","nasi padang","makan","ayam","kambing","rendang","satay","kebab","turkish","arab","middle east","biryani","roti prata"].some(a=>t.includes(a))}}s.halalEstablishments=[],s.initialized=!1}}]);
//# sourceMappingURL=248.4a9d35e2.chunk.js.map